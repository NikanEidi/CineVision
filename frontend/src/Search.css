/* =========================
   CineVision Search â€” Full CSS
   (wheel/trackpad + smaller BG band)
   ========================= */

.cvsearch {
    --perspective: 1600px;
    --primary: #6c42f5;
    --secondary: #9c42f5;
    --text-primary: #ffffff;
    --glass-bg: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.12);
    --main-bg: #0f0f1a;
    --border-radius-xxl: 24px;
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
    --shadow-xxl: 0 20px 40px rgba(0, 0, 0, 0.3);
    --glow-card-intense: 0 0 20px rgba(108, 66, 245, 0.4);
    --bg-h: clamp(220px, 40vh, 480px); /* height of the smaller background band */

    position: relative;
    min-height: 100dvh;
    background:
            radial-gradient(1600px 1200px at 70% -30%, rgba(108,66,245,.25), transparent),
            radial-gradient(1300px 1000px at 10% 130%, rgba(59,130,246,.18), transparent),
            var(--main-bg);
    color: var(--text-primary);
    overflow-x: hidden;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    padding-bottom: 2rem;
}

/* Keep everything above the BG band */
.cvsearch > *:not(.cvsearch__bg) { position: relative; z-index: 1; }

/* ---------- Smaller blurred poster band ---------- */
.cvsearch__bg {
    position: fixed;
    inset: 0;
    z-index: 0;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    filter: blur(24px) saturate(1.1);
    pointer-events: none;
    transition: opacity .35s ease, filter .35s ease; /* enables smooth fade */
}
.cvsearch__bg::after {
    /* soft edge fade so the band blends with page */
    content: "";
    position: absolute; inset: 0;
    background:
            linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.15) 35%, rgba(0,0,0,0) 70%),
            radial-gradient(70% 60% at 50% 55%, rgba(0,0,0,0) 0%, rgba(0,0,0,.25) 60%, rgba(0,0,0,.5) 100%);
}

/* ---------- Header ---------- */
.cvsearch__header {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.1rem clamp(1rem, 4vw, 2.5rem);
    position: sticky;
    top: 0;
    z-index: 9999;
    backdrop-filter: blur(14px);
    background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,0));
    border-bottom: 1px solid var(--glass-border);
    box-shadow: 0 4px 20px rgba(0,0,0,.2);
}

.cvsearch__back {
    appearance: none;
    border: 0;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    color: var(--text-primary);
    padding: 0.7rem 1rem;
    border-radius: 16px;
    cursor: pointer;
    transition: .22s ease;
    box-shadow: var(--shadow-md);
    display: flex;
    align-items: center;
    gap: .6rem;
    font-weight: 700;
}

.cvsearch__form {
    position: relative;
    display: flex;
    align-items: center;
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    padding: 0.8rem 1rem 0.8rem 3rem;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.05), var(--shadow-md);
    backdrop-filter: blur(14px);
    flex: 1;
    max-width: 820px;
    margin: 0 auto;
}
.cvsearch__icon { position: absolute; left: 1rem; opacity: .85; font-size: 1.2rem; }
.cvsearch__input {
    flex: 1; background: transparent; color: var(--text-primary);
    border: 0; outline: none; font-size: 1rem; width: 100%;
}
.cvsearch__input::placeholder { color: rgba(255,255,255,.75); }
.cvsearch__clear {
    appearance: none; border: 0; cursor: pointer;
    background: rgba(255,255,255,.12); color: var(--text-primary);
    padding: .5rem; border-radius: 14px; display: flex; align-items: center; justify-content: center;
}

/* ---------- Empty / Error ---------- */
.cvsearch__empty, .cvsearch__error {
    text-align: center; opacity: .95; padding: 2rem 1.5rem; font-size: 1.0625rem;
    border-radius: 16px; background: rgba(255,255,255,.05);
    margin: 1.25rem auto; max-width: 600px;
}
.cvsearch__error { color: #ffd4d4; background: rgba(255,0,0,.1); }

/* ---------- Stage (no frame, overlaps band) ---------- */
.cvsearch__stage {
    position: relative;
    perspective: var(--perspective);
    height: clamp(420px, 62vh, 760px);
    margin: 0.75rem auto 0;
    max-width: min(1600px, 96vw);
    user-select: none;
    touch-action: pan-y;

    background: transparent !important;
    border-radius: 0 !important;
    overflow: visible !important;
    box-shadow: none !important;
}

/* ---------- Coverflow Container ---------- */
.cvsearch__flow {
    position: relative; width: 100%; height: 100%;
    transform-style: preserve-3d;
    display: flex; justify-content: center; align-items: center;
}

/* ---------- Card ---------- */
.cvsearch__card {
    position: absolute; left: 50%; top: 50%;
    transform: translate(-50%, -50%);
    transform-style: preserve-3d;
    will-change: transform, opacity, filter;
    cursor: pointer;
}
.cvsearch__card.is-focus { filter: none !important; z-index: 1000; }

.cvsearch__posterWrap {
    position: relative;
    width: clamp(220px, 26vw, 340px);
    aspect-ratio: 2 / 3;
    border-radius: var(--border-radius-xxl);
    overflow: hidden;
    box-shadow: var(--shadow-xxl), var(--glow-card-intense);
    background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.015));
    border: 1px solid rgba(255,255,255,0.08);
    transition: transform .25s ease, box-shadow .25s ease;
}
.cvsearch__posterWrap:hover { box-shadow: var(--shadow-xxl), 0 0 26px var(--primary); }

.cvsearch__poster {
    width: 100%; height: 100%; object-fit: cover; display: block;
    transition: transform .25s ease;
}
.cvsearch__card:hover .cvsearch__poster { transform: scale(1.02); }

/* Floor shadow */
.cvsearch__posterWrap::before {
    content: ''; position: absolute; left: 6%; right: 6%; bottom: -26px; height: 22%;
    background: radial-gradient(ellipse at center, rgba(0,0,0,.45) 0%, rgba(0,0,0,.25) 55%, transparent 80%);
    filter: blur(12px); pointer-events: none; transform: translateZ(-3px);
}

/* Meta with chips */
.cvsearch__meta {
    position: absolute; left: 0; right: 0; bottom: 0; padding: 1rem;
    background: linear-gradient(180deg, transparent, rgba(0,0,0,.78) 60%, rgba(0,0,0,.94) 100%);
    color: #fff; border-bottom-left-radius: var(--border-radius-xxl); border-bottom-right-radius: var(--border-radius-xxl);
}
.cvsearch__title {
    font-size: clamp(1.05rem, 1.9vw, 1.45rem);
    font-weight: 800; margin: 0 0 .55rem 0; line-height: 1.2;
    text-shadow: 0 4px 12px rgba(0,0,0,.8);
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.cvsearch__sub { display: flex; gap: .5rem; flex-wrap: wrap; }
.cvsearch__chip {
    display: inline-flex; align-items: center; gap: .35rem;
    padding: .25rem .6rem; font-size: .8rem; font-weight: 700;
    background: rgba(255,255,255,.18); border: 1px solid rgba(255,255,255,.28);
    border-radius: 999px; letter-spacing: .2px;
}
.cvsearch__chip--rate { color: #ffd700; }

/* CTA / Fav / Share */
.cvsearch__cta {
    position: absolute; right: .9rem; top: .9rem;
    appearance: none; border: 0; cursor: pointer; padding: .6rem .85rem;
    border-radius: 14px; background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: #fff; font-weight: 800; box-shadow: var(--shadow-lg);
    font-size: .82rem; transition: transform .2s ease, filter .2s ease; z-index: 10;
}
.cvsearch__cta:hover { filter: brightness(1.08); transform: translateY(-2px); }
.cvsearch__favorite, .cvsearch__share {
    position: absolute; top: .9rem; background: rgba(255,255,255,.2); border: none; color: #fff;
    padding: .58rem; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;
    z-index: 10; transition: transform .2s ease;
}
.cvsearch__favorite { left: .9rem; }
.cvsearch__share { left: 3.25rem; }
.cvsearch__favorite.is-favorite { color: #ff5858; background: rgba(255,255,255,.28); }
.cvsearch__favorite:hover, .cvsearch__share:hover { transform: scale(1.08); }

/* Arrows */
.cvsearch__nav {
    position: absolute; top: 50%; transform: translateY(-50%);
    appearance: none; border: 0; cursor: pointer; width: 3rem; height: 3rem; border-radius: 50%;
    background: rgba(255,255,255,.16); border: 1px solid var(--glass-border); color: var(--text-primary);
    font-size: 1.6rem; display: flex; align-items: center; justify-content: center;
    box-shadow: var(--shadow-lg); transition: all .2s ease; z-index: 100;
}
.cvsearch__nav--left { left: .75rem; }
.cvsearch__nav--right { right: .75rem; }
.cvsearch__nav:hover { background: rgba(255,255,255,.26); transform: translateY(-50%) scale(1.08); }

/* Empty/error focus & a11y */
.cvsearch__input:focus,
.cvsearch__clear:focus,
.cvsearch__nav:focus,
.cvsearch__cta:focus,
.cvsearch__favorite:focus,
.cvsearch__share:focus,
.cvsearch__back:focus {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

/* Responsive tweaks */
@media (max-width: 1024px) {
    .cvsearch__stage { height: clamp(440px, 66vh, 680px); }
    .cvsearch__posterWrap { width: clamp(210px, 30vw, 300px); }
    .cvsearch__nav { width: 2.7rem; height: 2.7rem; font-size: 1.45rem; }
}
@media (max-width: 768px) {
    .cvsearch__header { padding: .9rem; gap: .7rem; }
    .cvsearch__form { padding: .7rem .9rem .7rem 2.7rem; max-width: none; }
    .cvsearch__icon { left: .85rem; font-size: 1.1rem; }

    .cvsearch__bg { top: calc(56px + 0.4rem); }
    .cvsearch__stage { height: clamp(420px, 62vh, 600px); margin-top: .5rem; }
    .cvsearch__posterWrap { width: clamp(190px, 58vw, 260px); }
    .cvsearch__nav { display: none; } /* touch users swipe/drag */
}
@media (max-width: 480px) {
    .cvsearch__header { flex-wrap: wrap; }
    .cvsearch__form { order: 3; width: 100%; margin-top: .6rem; }

    .cvsearch__stage { height: clamp(400px, 58vh, 540px); }
    .cvsearch__posterWrap { width: clamp(170px, 68vw, 230px); }
}